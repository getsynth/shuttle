### Local testing

Start in a terminal the auth layer:
```bash
docker compose -f docker-compose.rendered.yml up auth
```

In another terminal create an admin user with the API key set to `test-key`:
```bash
AUTH_CONTAINER_ID=$(docker ps -aqf "name=shuttle-auth") \
    docker exec $AUTH_CONTAINER_ID ./usr/local/bin/service \
    --state=/var/lib/shuttle-auth \
    init --name admin --key test-key
```

Create the corresponding JWT token and copy it to the shuttle config:
```bash
curl -s -H "Authorization: Bearer test-key" localhost:8008/auth/key \
    | jq -r '.token' \
    | read token; echo "api_key='$token'" > ~/.config/shuttle/config.toml
```

Start the deployer:
```bash
RUST_LOG=DEBUG cargo run --manifest-path deployer/Cargo.toml --bin shuttle-deployer -- --api-address 0.0.0.0:8001
```

In another terminal go to a shuttle project from the examples directory and run:
```bash
cargo run --manifest-path ../../../Cargo.toml --bin cargo-shuttle -- deploy
```