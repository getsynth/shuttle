syntax = "proto3";
package deployer;

service Deployer {
  rpc Deploy(DeployRequest) returns (DeployResponse);
}

message Deployment {
  string service_id = 1;
  string service_name = 2;
  bool is_next = 3;
  uint32 idle_minutes = 4;
  string image_name = 5;
  optional string git_commit_message = 6;
  optional string git_commit_hash = 7;
  optional string git_branch = 8;
  optional bool git_dirty = 9;
}

message DeployRequest {
  Deployment deployment = 1;
}

message DeployResponse {
  string deployment_id = 1;
}

message StopDeploymentRequest {
  string deployment_id = 1;
}

message StopDeploymentResponse {
  bool success = 1;
}

message RestartDeploymentRequest {
  string deployment_id = 1;
}

message RestartDeploymentResponse {
  bool success = 1;
}

message GetDeploymentRequest {
  string deployment_id = 1;
}

message GetDeploymentResponse {
  Deployment deployment = 1;
}

message GetDeploymentsRequest {
  string deployment_id = 1;
}

message GetDeploymentsResponse {
  Deployment deployment = 1;
}